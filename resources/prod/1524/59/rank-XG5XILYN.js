import{a as V}from"./chunk-WSUIV7QK.js";import{a as W}from"./chunk-AHCHIOTS.js";import{a as M}from"./chunk-4B242LTY.js";import{a as U}from"./chunk-YCDQXHEU.js";import{a as _,b as H}from"./chunk-KQUQ4OZB.js";import"./chunk-XTPY6JRS.js";import{a as L}from"./chunk-CAKHFLIX.js";import"./chunk-CCPQ5UCL.js";import"./chunk-4HA4ZKCB.js";import{a as P}from"./chunk-44SDNBY3.js";import{a as I}from"./chunk-BGP45KOK.js";import"./chunk-Y2V52NMO.js";import{b}from"./chunk-HB6GHVBC.js";import"./chunk-ABBYVZE2.js";import{a as E}from"./chunk-UWBCLHYK.js";import{a as T}from"./chunk-OSTU6BBQ.js";import"./chunk-6DEPOJJJ.js";import"./chunk-XQ5CNAXG.js";import{a as A}from"./chunk-WNGRECU2.js";import"./chunk-7H3CUBDO.js";import{a as S}from"./chunk-5HIH63DD.js";import"./chunk-HPL7UHIJ.js";import{a as B}from"./chunk-HXSV6HQN.js";import{a as C}from"./chunk-GWMHXCGO.js";import{b as s}from"./chunk-IYHXDIFW.js";import{a as j}from"./chunk-KCQQXR3A.js";import{a as N}from"./chunk-OFGKBPZY.js";import"./chunk-NH3HITNH.js";import{a}from"./chunk-C34SKZ6F.js";import"./chunk-TMODYEZT.js";import"./chunk-H6KXMG2X.js";import"./chunk-BR5BZ5EG.js";import"./chunk-GUIE3S4C.js";import"./chunk-FTXTFPQL.js";import"./chunk-4AN7KDFP.js";import"./chunk-WERDHZX6.js";import"./chunk-7RQZYKTJ.js";import{a as y}from"./chunk-XJ4CM2CH.js";import"./chunk-6LZRRVCI.js";import{a as D}from"./chunk-2A4DWP7Z.js";import"./chunk-X7LACEVL.js";import"./chunk-UG6Q3XWI.js";import"./chunk-D5AS4V7F.js";import{a as v}from"./chunk-WUYDXKAM.js";import"./chunk-5XAAMTXP.js";import"./chunk-O5LMDCSL.js";import"./chunk-T5PPVP6C.js";import"./chunk-4LLJDNLH.js";import{a as f}from"./chunk-Y27L7NRG.js";import"./chunk-PYNBBPHV.js";import"./chunk-BPFW3H66.js";import"./chunk-SRX5YX5V.js";import"./chunk-YZX6UUEO.js";import"./chunk-RLHOQMY5.js";import{a as R}from"./chunk-EGDIV5JD.js";import"./chunk-SCZRPZMX.js";import"./chunk-MCETWLUS.js";import{a as w}from"./chunk-A6IIWQBH.js";import{a as c}from"./chunk-MC5JUWDN.js";import{b as x}from"./chunk-AACPE6UD.js";import"./chunk-SCZYWGQD.js";import"./chunk-AMPLIILU.js";import"./chunk-7JEA3TWT.js";import"./chunk-5BRYW4V3.js";import{a as i}from"./chunk-MJT5TAYX.js";function u(t){return Object.values(t)}function p(t,o){return t+o}var F=[[2,5],[4,4],[64,5],[256,.1],[512,.2],[4096,.5],[32768,.2],[524288,.1],[65536,5],[4194304,4]],G=(t,[,o])=>t+o-1,O=t=>F.filter(([o])=>W(t,o)).reduce(G,0),Q=t=>t>>>0,Z=t=>Q(t).toString(2),z=t=>Z(t).split("").map(Number).reduce(p,0),J=t=>b(O(t)+z(t),1);function K(t,o){let n=o.children[0],e=c(n.firstChild),r=t.find(m=>m&&m.name===e);r&&P(n,`<span class="fshBlue">(${J(r.permissions)}) Tax:(${r.tax}%)</span> `)}function X(t,o,n){n.s&&(t.forEach(i(K,n.r)),o.classList.remove("fshSpinner"))}function Y(t,o){let n=T({className:"fshBlock fshRelative fshSpinner fshSpinner12",style:{height:"15px",width:"136px"}});M(n,o),H().then(i(X,t,n))}function tt(t,o){let n=N({className:"custombutton",type:"button",value:"Get Rank Weightings"});f(n,i(Y,t,n));let e=o.parentNode.parentNode;a(e,"&nbsp;"),y(e,n)}function l(t){let o=S('#pCC a[href*="=ranks&subcmd2=add"]');o&&tt(t,o)}function d(t,o){return v({cmd:"guild",subcmd:"ranks",subcmd2:t,rank_id:o}).then(()=>({s:!0}))}function h(t,o){return _({subcmd2:t,rank_id:o})}function g(t,o){return D(h,d,t,o)}var k;function ot(t,o){return k>=Math.min(t.rowIndex,o)||o<1||o>t.parentNode.rows.length}function nt(t){return t==="Up"?-1:2}function et(t){return t==="Up"?-22:22}function rt(t,o,n){let e=t.target.getAttribute("onclick").match(/rank_id=(\d+)/);g(C(t.target.value),e[1]);let r=o.parentNode.rows[n];j(o,r);let m=et(t.target.value);window.scrollBy(0,m),t.stopPropagation()}function it(t){let o=t.target.parentNode.parentNode.parentNode,n=o.rowIndex+nt(t.target.value);ot(o,n)||rt(t,o,n)}function mt(t){return["Up","Down"].includes(t.target.value)}function at(t){mt(t)&&it(t)}function $(){k&&x("ajaxifyRankControls")&&f(s,at,!0)}function q(t,o){o&&o[1].includes(B())&&(k=t.rowIndex)}function st(){let t=s.lastElementChild.previousElementSibling;if(t.rows&&t.rows.length>7)return w(t.rows[7].children[0].children[0].rows)}function ct(t,o){return o[0]===t}function ft(t){return t&&t[1].length>0}function ut(t,o){return t.rowIndex===1?"Guild Founder":c(o)}function pt(t,o){let n=o.children[0],e=ut(o,n),r=t.find(i(ct,e));ft(r)&&(q(o,r),a(n,` <span class="fshBlue">- ${r[1].join(", ")}</span>`))}function lt(t){let o=st();o&&(E([5,3,o,1,i(pt,t)]),l(o),$())}function dt(t){let o=u(I(R(t).filter(V)));return L(o.map(n=>n.rank_name)).map(n=>[n,o.filter(e=>e.rank_name===n).map(e=>e.username)])}function ht(){A()||U(!1).then(dt).then(lt)}export{ht as default};
//# sourceMappingURL=rank-XG5XILYN.js.map
