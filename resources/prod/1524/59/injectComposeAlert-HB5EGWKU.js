import{a as p}from"./chunk-CBOBD5IF.js";import{a as N}from"./chunk-44SDNBY3.js";import{a as r}from"./chunk-XQ5CNAXG.js";import{a as h}from"./chunk-7H3CUBDO.js";import"./chunk-DHF6BJQI.js";import{a as n}from"./chunk-YZLKCQP2.js";import"./chunk-KXW7HYGX.js";import{a as A}from"./chunk-RC4NT5JT.js";import"./chunk-AIP6BPK2.js";import"./chunk-EQPMHYZD.js";import"./chunk-TMODYEZT.js";import"./chunk-7RQZYKTJ.js";import{a as T}from"./chunk-2A4DWP7Z.js";import{a as B}from"./chunk-X7LACEVL.js";import{a as w}from"./chunk-UG6Q3XWI.js";import{a as y}from"./chunk-D5AS4V7F.js";import{a as C}from"./chunk-WUYDXKAM.js";import"./chunk-5XAAMTXP.js";import"./chunk-O5LMDCSL.js";import"./chunk-T5PPVP6C.js";import"./chunk-4LLJDNLH.js";import"./chunk-PYNBBPHV.js";import"./chunk-BPFW3H66.js";import{a as d}from"./chunk-SRX5YX5V.js";import"./chunk-YZX6UUEO.js";import"./chunk-RLHOQMY5.js";import"./chunk-EGDIV5JD.js";import"./chunk-A6IIWQBH.js";import"./chunk-MC5JUWDN.js";import{b as s}from"./chunk-AACPE6UD.js";import{a as g}from"./chunk-SCZYWGQD.js";import"./chunk-AMPLIILU.js";import{Q as x,na as e,oa as i}from"./chunk-7JEA3TWT.js";import"./chunk-5BRYW4V3.js";import"./chunk-MJT5TAYX.js";function _(o){let t=o.match(/ETA: (\d+)h (\d+)m (\d+)s/);return{time_remaining:Number(t[1])*60*60+Number(t[2])*60+Number(t[3])}}function v(o){let t=y(o),u=p("composing-potion",t);if(u.length===0)return{s:!1};let j=u.length,k=p("composing-potion-time",t).map(A).filter(M=>M.endsWith("s")).map(_);return{r:{max_potions:j,potions:k},s:!0}}function c(){return C({cmd:"composing"}).then(v)}function a(o){return B(w({cmd:"composing"},o))}function f(){return a({subcmd:"view"})}function l(){return T(f,c)}var D=`<li class="notification"><a href="${x}"><span class="notification-icon"></span><p class="notification-content">Composing to do</p></a></li>`;function m(){N(d("notifications"),D)}function V(o){return o.time_remaining}function b(){m(),n(e,!0)}function E(o){let t=Math.min.apply(null,o.map(V));t>0?(n(e,!1),n(i,r+t*1e3)):b()}function I(o){o.potions.length!==o.max_potions?b():E(o.potions)}function P(o){o.s&&I(o.r)}function $(){let o=s(i);o&&r<o||l().then(P)}function H(){s(e)?m():$()}function L(){g.cmd!=="composing"&&h()&&H()}export{L as default};
//# sourceMappingURL=injectComposeAlert-HB5EGWKU.js.map
