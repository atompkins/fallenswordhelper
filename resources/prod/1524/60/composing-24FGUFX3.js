import{a as h,b as M}from"./chunk-RJLMTX3B.js";import{a as E}from"./chunk-UWGGAZ4Z.js";import{a as D,b as J}from"./chunk-Z5JPIPAC.js";import{a as g}from"./chunk-V3MST2FC.js";import{a as d}from"./chunk-4PJI7ZB7.js";import{a as w}from"./chunk-YSLN4J5T.js";import{a as T}from"./chunk-J6OHHD6D.js";import{a as P}from"./chunk-5NBSFLUX.js";import{a as R}from"./chunk-T7PFQ73F.js";import{a as $}from"./chunk-TLXQ64DC.js";import{a as H}from"./chunk-Q4XXYB5L.js";import{a}from"./chunk-M2EZ4FGP.js";import"./chunk-WEM3KR6S.js";import{b as m}from"./chunk-ZPKDX2TA.js";import{a as V}from"./chunk-5EMXVJ5E.js";import{a as y}from"./chunk-MZ4RO2BZ.js";import{a as j}from"./chunk-LGD2O3Z4.js";import"./chunk-5R3F3CA6.js";import"./chunk-L5AX3Z7V.js";import"./chunk-EFQ65JH2.js";import"./chunk-O7UFEMZS.js";import{a as C}from"./chunk-PZPCKQA2.js";import"./chunk-TB4ICF4L.js";import{a as _}from"./chunk-JXDCVDAG.js";import"./chunk-IZDCUCLR.js";import"./chunk-W5APWJD5.js";import"./chunk-WXWODVFY.js";import"./chunk-24RPK7WU.js";import"./chunk-VNMHD7BL.js";import{a as b}from"./chunk-3GV55PFT.js";import{a as F}from"./chunk-S6Z6AK6H.js";import"./chunk-4WLRCDD6.js";import{a as Q}from"./chunk-NORPNMTZ.js";import"./chunk-GZ5MHZSO.js";import"./chunk-ECTWXQFU.js";import{a as s}from"./chunk-5YV4PH6I.js";import{a as f}from"./chunk-6MKXC6ON.js";import"./chunk-HVC7S5PE.js";import{a as c}from"./chunk-QARH3V57.js";import"./chunk-NC4XYYGB.js";import{a as N}from"./chunk-E5FOTTRM.js";import"./chunk-OEATIPCL.js";import"./chunk-HVPMEAYK.js";import"./chunk-Q6VOFYH2.js";import{a as u}from"./chunk-QH6YIHH4.js";import{a as i}from"./chunk-3RYC2EKK.js";import"./chunk-OACBWC2H.js";import{a as L}from"./chunk-IJUADRFJ.js";import{b as I}from"./chunk-VEFZUGNI.js";import{a as x}from"./chunk-FJEDYAWH.js";import"./chunk-WV7FHD63.js";import{na as p,oa as q}from"./chunk-OOFTOHPO.js";import{b as B}from"./chunk-L5TVV64R.js";import{a as r}from"./chunk-TQN6MN4F.js";function S(e){return Q({cache:!1,dataType:"json",data:{cmd:"composing",subcmd:"createajax",template_id:e,fshrnd:M()}})}function G(){return`url(${B}composing/${h(1,11)}_${h(1,51)}.png)`}function K(e,o){s("",e.children[0]),e.children[0].classList.add("fshPot"),e.children[0].style.backgroundImage=G(),s(`Creating '<span class="fshBold">${o}</span>' Potion`,e.children[2]),s("",e.children[3])}function U(){i('[id|="composing-template"]:not(#composing-template-multi)').length===0&&a(p,!1)}function W(e){let o=e.parentNode;!o||(s('<div class="fshScs">Success</div>',o),K(o.previousElementSibling.previousElementSibling,e[e.selectedIndex].text),U())}function X(e,o){let t=e.parentNode;!t||!o||(o.error?s(`<div class="fshScs">${o.error}</div>`,t):W(e))}function Y(e){S(e.value).then(r(X,e))}function l(e,o){o.id=`proc-${o.id}`,s("",e),e.classList.add("fshSpinner","fshSpinner12","fshComposingSpinner"),Y(o),D("quickcreate")}function O(e,o){e.classList.add(`left-${o.toString()}`)}function Z(e){let o=i(".quickCreate .sendLink");O(e,o.length)}function ee(e,o){c("composing","FastComposeButton");let t=i('[id|="composing-template"]:not(#composing-template-multi)');if(!(t.length<e.value))for(let n=0;n<e.value;n+=1)t[n].value=o,l(t[n].nextElementSibling.nextElementSibling,t[n])}function oe(e){let o=e.target,{templateId:t}=o.dataset;t&&ee(o,t)}function te(e,o){return y({className:"awesome orange",dataset:{templateId:o},type:"button",value:e})}function ne(e,o,t,n){return n===0&&_(e[1],o.insertCell(-1)),b(o.insertCell(-1),te((n+1).toString(),e[0])),o}function re(e,o,t,n){return e.reduce(r(ne,n),t.insertRow(-1)),t}function me(e,o,t){let n=w({id:"fshFastCompose"});return O(n,t),e.reduce(r(re,o,t),n)}function se(e){return[e.value,e.text]}function ie(e,o,t){let n=u("#composing-template-multi option").map(se),v=me(n,o,t);b(e,v),f(m,oe),J("quickcreate",r(Z,v))}function ce(e){c("composing","FastCompose"),C(e,"<br>");let o=d("composing-potion-time",document),t=o.filter(j("ETA: n/a")).length;t>0?ie(e,o,t):C(e,"No open slots!")}function k(){let e=H("#pCC div.centered");g(e.children[1],' | <label for="fast-compose"><span class="sendLink">Fast Compose</span></label>');let o=F({className:"centered"});E(o,e);let t=y({id:"fast-compose",type:"checkbox"});E(t,e),T(t,"change",r(ce,o))}var ae=/ETA:\s*(\d+)h\s*(\d+)m\s*(\d+)s/;function le(e){let o=ae.exec(L(e));return o?(o[1]*3600+o[2]*60+Number(o[3]))*1e3+P:0}function z(e){a(p,e)}function A(){if(!x.enableComposingAlert)return;let e=d("composing-potion-time",document),o=Math.min(...e.map(le));o===0?z(!0):(z(!1),a(q,o))}function pe(){if(I("moveComposingButtons")){let e=N("composing-error-dialog").previousElementSibling;e.setAttribute("style","text-align: right; padding: 0 38px 0 0");let o=$("composing-level",m)[0].parentNode;V(e,o)}}function ue(e){g(e,'<span class="quickCreate">[<span class="sendLink">Quick Create</span>]</span>')}function fe(e){return e.tagName==="SPAN"&&e.className==="quickCreate"}function de(e){let o=e.previousElementSibling.previousElementSibling;o&&o.value!=="none"&&(l(e,o),c("composing","QuickCreate"))}function ge(e){let o=e.target.parentNode;fe(o)&&de(o)}function Ce(){A(),u("input[id^=create-]:not(#create-multi)",m).forEach(ue),f(m,ge),pe(),k()}function ye(){R()&&m&&Ce()}export{ye as default};
//# sourceMappingURL=composing-24FGUFX3.js.map
