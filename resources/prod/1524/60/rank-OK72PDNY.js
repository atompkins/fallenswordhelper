import{a as H}from"./chunk-YZ3LNFDH.js";import{a as S,b as P}from"./chunk-HEOL2JE6.js";import"./chunk-65SQLHIT.js";import"./chunk-YB2NK3P7.js";import"./chunk-2JNINSRM.js";import{a as D}from"./chunk-KL44QB5G.js";import{b as R}from"./chunk-XWSGTYOL.js";import{a as E}from"./chunk-P4HR4ZZK.js";import{a as v}from"./chunk-LZ6APVKA.js";import"./chunk-T7PFQ73F.js";import{a as N}from"./chunk-Q4XXYB5L.js";import"./chunk-3XXFU55Y.js";import{a as b}from"./chunk-NQB7O5EN.js";import{a as y}from"./chunk-WGKTKSM6.js";import{b as s}from"./chunk-ZPKDX2TA.js";import{a as j}from"./chunk-5EMXVJ5E.js";import{a as B}from"./chunk-MZ4RO2BZ.js";import{a as m}from"./chunk-PZPCKQA2.js";import"./chunk-TB4ICF4L.js";import"./chunk-IZDCUCLR.js";import"./chunk-W5APWJD5.js";import"./chunk-WXWODVFY.js";import"./chunk-24RPK7WU.js";import"./chunk-VNMHD7BL.js";import{a as C}from"./chunk-3GV55PFT.js";import"./chunk-4WLRCDD6.js";import{a as T}from"./chunk-INSIMFVG.js";import"./chunk-V7EDYNK5.js";import"./chunk-AU7HVVRL.js";import"./chunk-7D7PUCSG.js";import{a as A}from"./chunk-NTW3JDM6.js";import"./chunk-NORPNMTZ.js";import"./chunk-GZ5MHZSO.js";import"./chunk-ECTWXQFU.js";import"./chunk-ARNYHQX3.js";import{a as p}from"./chunk-6MKXC6ON.js";import"./chunk-HVC7S5PE.js";import{a as f}from"./chunk-QARH3V57.js";import"./chunk-NC4XYYGB.js";import"./chunk-E5FOTTRM.js";import"./chunk-OEATIPCL.js";import"./chunk-HVPMEAYK.js";import"./chunk-Q6VOFYH2.js";import"./chunk-QH6YIHH4.js";import"./chunk-3RYC2EKK.js";import{a as w}from"./chunk-OACBWC2H.js";import{a as c}from"./chunk-IJUADRFJ.js";import{b as x}from"./chunk-VEFZUGNI.js";import"./chunk-FJEDYAWH.js";import"./chunk-WV7FHD63.js";import"./chunk-OOFTOHPO.js";import"./chunk-L5TVV64R.js";import{a}from"./chunk-TQN6MN4F.js";function u(t,o){return t+o}var W=[[2,5],[4,4],[64,5],[256,.1],[512,.2],[4096,.5],[32768,.2],[524288,.1],[65536,5],[4194304,4]],_=(t,[,o])=>t+o-1,$=t=>W.filter(([o])=>H(t,o)).reduce(_,0),L=t=>t>>>0,q=t=>L(t).toString(2),F=t=>q(t).split("").map(Number).reduce(u,0),M=t=>R($(t)+F(t),1);function Q(t,o){let n=o.children[0],i=c(n.firstChild),r=t.find(e=>e&&e.name===i);r&&D(n,`<span class="fshBlue">(${M(r.permissions)}) Tax:(${r.tax}%)</span> `)}function G(t,o){f("ranks","fetchRankData"),t.forEach(a(Q,o))}function O(t,o,n){let i=B({className:"custombutton",type:"button",value:"Get Rank Weightings"});p(i,a(G,t,o));let r=n.parentNode.parentNode;m(r,"&nbsp;"),C(r,i)}function l(t,o){let n=N('#pCC a[href*="=ranks&subcmd2=add"]');n&&O(t,o,n)}function d(t,o){return A({cmd:"guild",subcmd:"ranks",subcmd2:t,rank_id:o}).then(()=>({s:!0}))}function g(t,o){return S({subcmd2:t,rank_id:o})}function h(t,o){return T(g,d,t,o)}var k,Z=t=>["Up","Down"].includes(t.target.value);function z(t,o){return k>=Math.min(t.rowIndex,o)||o<1||o>t.parentNode.rows.length}function J(t){return t==="Up"?-1:2}function K(t){return t==="Up"?-22:22}function X(t,o,n){let i=t.target.getAttribute("onclick").match(/rank_id=(\d+)/);h(y(t.target.value),i[1]);let r=o.parentNode.rows[n];j(o,r);let e=K(t.target.value);window.scrollBy(0,e),t.stopPropagation()}function Y(t){f("ranks","overrideUpDown");let o=t.target.parentNode.parentNode.parentNode,n=o.rowIndex+J(t.target.value);z(o,n)||X(t,o,n)}function tt(t){Z(t)&&Y(t)}function I(){k&&x("ajaxifyRankControls")&&p(s,tt,!0)}function U(t,o){o.includes(b())&&(k=t.rowIndex)}function ot(){let t=s.lastElementChild.previousElementSibling.rows?.[7]?.children[0]?.children[0]?.rows;if(t)return w(t)}function nt(t,o){let n=o.children[0],i=c(n),r=t.find(e=>e.name===i);if(r?.members.length){let e=r.members.map(V=>V.name);U(o,e),m(n,` <span class="fshBlue">- ${e.join(", ")}</span>`)}}function rt(t){let o=ot();o&&(E([5,3,o,1,a(nt,t)]),l(o,t),I())}async function et(){if(v())return;let t=await P();t?.s&&rt(t.r)}export{et as default};
//# sourceMappingURL=rank-OK72PDNY.js.map
