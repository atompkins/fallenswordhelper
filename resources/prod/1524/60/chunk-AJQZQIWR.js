import{b as c}from"./chunk-XWSGTYOL.js";import{a as x}from"./chunk-NQB7O5EN.js";import{a as w}from"./chunk-WGKTKSM6.js";import{b}from"./chunk-ZPKDX2TA.js";import{a as T}from"./chunk-EFQ65JH2.js";import{a as B}from"./chunk-BRBGUBTX.js";import{a as m}from"./chunk-KKL2RL5K.js";import{a as y}from"./chunk-ARNYHQX3.js";import{a as u}from"./chunk-5YV4PH6I.js";import{a as k}from"./chunk-QARH3V57.js";import{a as i}from"./chunk-E5FOTTRM.js";import{a as h}from"./chunk-Q6VOFYH2.js";import{a as r}from"./chunk-IJUADRFJ.js";import{b as d}from"./chunk-VEFZUGNI.js";import{a as g}from"./chunk-FJEDYAWH.js";import{a as f}from"./chunk-TQN6MN4F.js";var S=[[t=>t.fsp>0,t=>`${c(t.fsp,2)} FSP`],[t=>t.fsp>0&&t.k>0,()=>" and "],[t=>t.k>0,t=>`${t.k} k`],[t=>t.stam>0&&(t.fsp>0||t.k>0),()=>" and "],[t=>t.stam>0,t=>`${t.stam} Stam(${c(t.stam/25,1)}fsp)`],[t=>t.unknown>0,t=>` (${t.unknown} buff(s) with unknown cost)`]];function L(t,e){return e[0](t)?e[1](t):""}function a(t){return S.map(f(L,t)).join("")}function P(){g.subcmd==="-"&&k("profile","formatBuffsToBuy")}function v(){let t=B("h1",b);return t.length!==0?t=r(t[0]):t=x(),t}var F=[[t=>!t.includes("{buffs}"),(t,e)=>`${t} ${e}`],[t=>!t.includes("{cost}"),(t,e)=>t.replace(/{buffs}/g,`\`~${e}~\``)],[()=>!0,(t,e,o)=>t.replace(/{buffs}/g,`\`~${e}~\``).replace(/{cost}/g,o.buffCostTotalText)]];function I(t,e){return e[0](t)}function R(t,e){return F.find(f(I,t))[1](t,y(e.buffs).join(", "),e)}function A(t){P();let e=v(),o=T(d("buyBuffsGreeting"));o=o.replace(/{playername}/g,e),o=R(o,t),window.openQuickMsgDialog(e,o,"")}function l(t){t.count>0&&A(t)}var j=/[^a-zA-Z0-9.,+\- ]/g,H=/([+-]?[.\d]{1,10} {0,10}k)|([+-]?[.\d]{1,10} {0,10}fsp)|([+-]?[.\d]{1,10} {0,10}stam)/;function C(t){return t&&t.nodeName!=="BR"}function $(t){return w(t.replace(j,"")).match(H)}function M(t){let e="",o=t;for(;C(o);){let s=r(o);o=o.nextSibling,e+=s}return $(e)}function z(t){let e="",o=t;for(;C(o);){let s=r(o);o=o.previousSibling,e=s+e}return $(e)}function p(t){let e=M(t);return e||(e=z(t)),e}var n={count:0,buffs:{}};function G(t){return`<tr><td>${t[0]}</td><td>: ${t[1][0]}${t[1][1]}</td></tr>`}function U(t,e){return t[e[1][1]]+=e[1][0],t}function V(){let t=h(n.buffs),e=a(t.reduce(U,{k:0,fsp:0,stam:0,unknown:0}));u(`<span class="tip-static" data-tipped="This is an estimated cost based on how the script finds the cost associated with buffs from viewing bio. It can be incorrect, please use with discretion.<br><hr><table border=0>${t.map(G).join("")}</table><b>Total: ${e}</b>">Estimated Cost: <b>${e}</b></span>`,i("buffCost")),n.buffCostTotalText=e}function D(){n.count>0?V():(u("&nbsp;",i("buffCost")),n.buffCostTotalText="")}function O(t){return t[0].includes("k")?"k":t[0].includes("f")?"fsp":"stam"}function Q(t){let e=p(t),o,s;e?(o=O(e),[s]=e[0].match(/([+-]?[.\d]+)/)):(o="unknown",s="1"),n.buffs[r(t)]=[parseFloat(s),o],n.count+=1}function Y(t){let e=m("fshBlue",t);t.classList.toggle("fshBlue"),t.classList.toggle("fshYellow");let o=r(t);e?Q(t):(n.count-=1,delete n.buffs[o]),D()}function E(t){return!t.tagName||t.tagName==="SPAN"?t:E(t.parentNode)}function Z(t){return t.classList&&m("buffLink",t)}function q(t){if(t.target.id==="fshSendBuffMsg"){l(n);return}let e=E(t.target);Z(e)&&Y(e)}function J(t,e,o){return t.replace(e,`<span id="fshBuff${o}" class="buffLink fshBlue">${e.replace(/(`~)|(~`)|(\{b\})|(\{\/b\})/g,"")}</span>`)}function K(t){let e=t.replace(/\{b\}/g,"`~").replace(/\{\/b\}/g,"~`"),o=e.match(/`~([^~]|~(?!`))*~`/g);if(!!o)return e=o.reduce(J,e),e.indexOf("[cmd]")<0&&(e+="[cmd]"),e=e.replace("[cmd]",'<br><input id="fshSendBuffMsg" class="custombutton" type="button" value="Ask For Buffs"><br><span id="buffCost" class="fshRed">&nbsp;</span>'),e}export{q as a,K as b};
//# sourceMappingURL=chunk-AJQZQIWR.js.map
