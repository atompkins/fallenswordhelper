import{a as D,b as R}from"./chunk-7QFUOTOO.js";import{a as N}from"./chunk-YB2NK3P7.js";import"./chunk-2JNINSRM.js";import{a as L}from"./chunk-J4BALXGZ.js";import{a as A}from"./chunk-BNPQH32O.js";import{a as h}from"./chunk-J6OHHD6D.js";import{a as B}from"./chunk-LZ6APVKA.js";import"./chunk-T7PFQ73F.js";import"./chunk-WEM3KR6S.js";import{b as s}from"./chunk-ZPKDX2TA.js";import{a as Q}from"./chunk-YBWAJK7U.js";import{a as f}from"./chunk-5EMXVJ5E.js";import{a as E}from"./chunk-MZ4RO2BZ.js";import{a as T}from"./chunk-RHT6F3VW.js";import"./chunk-PZPCKQA2.js";import"./chunk-TB4ICF4L.js";import"./chunk-BRBGUBTX.js";import{a as q}from"./chunk-KNYHE7TV.js";import{a as g}from"./chunk-W5APWJD5.js";import"./chunk-VNMHD7BL.js";import{a as v}from"./chunk-KKL2RL5K.js";import{a as i}from"./chunk-3GV55PFT.js";import{a as r}from"./chunk-S6Z6AK6H.js";import"./chunk-4WLRCDD6.js";import{a as C}from"./chunk-INSIMFVG.js";import{a as M}from"./chunk-V7EDYNK5.js";import"./chunk-AU7HVVRL.js";import"./chunk-NORPNMTZ.js";import"./chunk-GZ5MHZSO.js";import"./chunk-ECTWXQFU.js";import"./chunk-ARNYHQX3.js";import{a as l}from"./chunk-5YV4PH6I.js";import{a as y}from"./chunk-6MKXC6ON.js";import"./chunk-HVC7S5PE.js";import"./chunk-NC4XYYGB.js";import{a as b}from"./chunk-E5FOTTRM.js";import"./chunk-OEATIPCL.js";import"./chunk-HVPMEAYK.js";import{a as I}from"./chunk-Q6VOFYH2.js";import"./chunk-OACBWC2H.js";import"./chunk-VEFZUGNI.js";import"./chunk-FJEDYAWH.js";import"./chunk-WV7FHD63.js";import{g as x}from"./chunk-OOFTOHPO.js";import"./chunk-L5TVV64R.js";import{a}from"./chunk-TQN6MN4F.js";function H(t){return q({cmd:"tempinv",subcmd:"takeitem",temp_id:t,ajax:1})}function S(t){let e=t.filter(n=>n.r===0),o=t.filter(n=>n.r!==0);return e.length>0?{r:e.map(n=>({id:n.temp_id})),s:!0}:o.length>0?{e:{message:o[0].m},s:!1}:{e:{message:t[0].m},s:!1}}function p(t){return N(t.map(H),S)}function u(t){return M({cmd:"tempinv",subcmd:"takeitems",item:t})}function d(t){return C(u,p,t)}function j(t,e,o){let n=Q({id:t,className:"sendLink",htmlFor:"fshQuickTake",textContent:`Toggle ${e}`});return f(n,o),n}function F(t,e){let o=e.children[0],{tipped:n}=o.dataset,m=x.exec(n);if(!m)return t;let c=m[1],k=m[2];return t[c]?t[c].invIds.push(k):t[c]={invIds:[k],tipped:n.replace(/&extra=\d/,""),src:o.src},t}function _(){return r({id:"quickTake",innerHTML:'<div class="fshCenter"><br><font size="3"><b>Quick Take</b></font><br><br>Select which item to take all similar items from your Mailbox.</div><div></div>'})}function J(t){let e=r(),o=A();return i(e,o),i(t,e),o}function O(t,e){let o=e[1],n=r(),m=r({innerHTML:`<img src="${o.src}" class="tip-dynamic" data-tipped="${o.tipped}">`});i(n,m);let c=r({innerHTML:`<button class="fshBl fshBls" data-id="${e[0]}">Take All ${o.invIds.length}</button>`});i(n,c),i(t,n)}function P(t,e){I(e).forEach(a(O,t))}function U(t){let e=$(`#temp-inv-img-${t}`).qtip("api");e&&e.destroy(!0)}function w(t){U(t.id);let e=b(`temp-inv-${t.id}`);e&&l("",e)}function z(t,e){e.r.forEach(w),D(`${e.r.length.toString()} item(s) taken.`,t)}function G(t,e){R(e,t)||g(e.r)&&z(t,e)}function K(t,e){d(e).then(a(G,t))}function V(t,e,o){let n=o.dataset.id,{invIds:m}=t[n];l(`taking all ${m.length} items`,o.parentNode),L(40,m).forEach(a(K,e))}function W(t,e,o){v("fshBls",o.target)&&V(t,e,o.target)}function X(t,e,o){let n=r({className:"fshTakeGrid"});P(n,t),i(e,n),y(n,a(W,t,o))}function Y(t){let e=_(),o=J(e);i(e,r()),X(t,e,o),i(s,e)}function Z(t,e){j("qtOn","Mailbox",e);let o=t.reduce(F,{});Y(o)}function tt(t,e){let o=E({id:"fshQuickTake",type:"checkbox"});f(o,e),h(o,"change",a(Z,t,e))}function et(){if(B()||!s)return;let t=T("a",s);if(t.length===0)return;let e=s.lastElementChild;tt(t,e),j("qtOff","Quick Take",e)}export{et as default};
//# sourceMappingURL=mailbox-OUTPKOQU.js.map
