import{a as Z}from"./chunk-QWOU26P4.js";import{a as Y}from"./chunk-EW7YRYNW.js";import{a as X}from"./chunk-CZYRPPQQ.js";import{a as K}from"./chunk-ZXNOZXTV.js";import{a as J}from"./chunk-NHOYLDCV.js";import{a as s}from"./chunk-YDUJNKBK.js";import"./chunk-SROWON7W.js";import"./chunk-YCZA3THB.js";import{a as M,b as O}from"./chunk-NH5T7EN7.js";import{a as R}from"./chunk-4FRE2TLY.js";import"./chunk-WHUULWLY.js";import"./chunk-HO5SXPUR.js";import{b as F}from"./chunk-CGV2TJFE.js";import"./chunk-44BWB3Q5.js";import"./chunk-6GFXSPHP.js";import{a as Q}from"./chunk-JQ6TFVPK.js";import{a as U}from"./chunk-VHI5XX6M.js";import{a as I}from"./chunk-5UCVWN2U.js";import{b as a}from"./chunk-JPA4PKRE.js";import{a as q}from"./chunk-5ABGN6TX.js";import"./chunk-KANBDIY6.js";import{a as L}from"./chunk-G5NCG6ZO.js";import{b as i}from"./chunk-7KGOEIPC.js";import"./chunk-KIGZSTQN.js";import{a as k}from"./chunk-6NNTO4LI.js";import{a as V}from"./chunk-KHYQYGSX.js";import{a as z}from"./chunk-EEJVWBBD.js";import{a as l}from"./chunk-7QZ7K4JT.js";import"./chunk-JNMWULRZ.js";import"./chunk-5YYRQ4XP.js";import{a as B}from"./chunk-YK5YCIFI.js";import"./chunk-BOK6PI4C.js";import{a as S}from"./chunk-PE2Z7ZIG.js";import"./chunk-CI7BPN4C.js";import{a as b}from"./chunk-HDTIWYV4.js";import"./chunk-RF7K337W.js";import"./chunk-V6QPYEQA.js";import"./chunk-E6LT46ZX.js";import{a as j}from"./chunk-UF6HKXEC.js";import{a as m}from"./chunk-KIPS4CXG.js";import{a as W}from"./chunk-RTVLQCU7.js";import"./chunk-PUMXFYDY.js";import{a as H}from"./chunk-QU2O5LW3.js";import{a as $}from"./chunk-XQHJD2OP.js";import"./chunk-RIMVOGPJ.js";import"./chunk-UJM3TQ4Q.js";import"./chunk-UUZRSBW7.js";import"./chunk-4HFYLTSA.js";import{a as D}from"./chunk-OBGXUIQG.js";import"./chunk-ZVRZUN6W.js";import{a as C}from"./chunk-RZHLTJPZ.js";import"./chunk-CXH2ICGZ.js";import{a as _}from"./chunk-B4CACURR.js";import"./chunk-X3N42HIO.js";import"./chunk-EMXVU7FX.js";import"./chunk-PZET6DEP.js";import"./chunk-353SUQQH.js";import"./chunk-IKPUDF3E.js";import{b as G}from"./chunk-ICRHQMJP.js";import"./chunk-FJHRVDDP.js";import{a as N}from"./chunk-SVFIEWQV.js";import{h as A,sa as E}from"./chunk-NEZAPTHY.js";import"./chunk-GTEPU6L3.js";import{a as n}from"./chunk-J6WQ3WGO.js";function f(e){return W({cmd:"findplayer",subcmd:"view",search_username:e})}function le(e){let t=e.last_login;return t||(t=0),{r:[{last_activity:Number(t),vl:e.virtual_level}],s:!0}}function c(e){return K(e).then(le)}function p(e){return m(f,c,e)}function d(e){return Y({subcmd:"view",guild_id:e})}function u(e){return m(d,Z,e)}function g(){return j({subcmd:"view"})}async function y(){let e=await $({cmd:"profile"}),t=H(e),r=_("stat-vl",t);if(!r)return{s:!1};let o=Number(l(r));return{r:{last_activity:0,virtual_level:o},s:!0}}function h(){return m(g,y)}function me(e){return e.rows[0].cells[0].children[0]?Number(A.exec(e.rows[0].cells[0].children[0].href)[1]):-1}var ae=e=>[e,l(e),me(e)];function v(){let e=V(E,i).slice(4).map(ae),t=s(e.map(([,,r])=>r)).map(r=>[r,e.filter(([,,o])=>o===r)]);return[...t.filter(([r,o])=>r!==-1&&o.length>4),[-1,t.filter(([r,o])=>r===-1||o.length<5).flatMap(([,r])=>r)]]}var P,ee,se=[()=>P,e=>N(e)||e!==ee,(e,t)=>t.last_login>=a-604800,(e,t)=>t.virtual_level>=M(),(e,t)=>t.virtual_level<=O()];function fe(e,t){return se.every(r=>r(e,t))}function te(e,t,r){B(e.rows[0],`<td>${F({last_login:r.last_login})}</td>`),fe(t,r)&&e.parentNode.parentNode.classList.add("lvlHighlight")}function re(){P=G("highlightPlayersNearMyLvl"),P&&(ee=I())}var w;function ie(){U(w)}function oe(e){z(e),w=Q({className:"fshCurveContainer fshTopListSpinner",innerHTML:'<div class="fshCurveEle fshCurveLbl fshOldSpinner"></div>'}),e.parentNode.replaceChild(w,e)}var ce=([,e],t)=>t.name===e,pe=([e])=>e!==-1,de=({members:e})=>e,ne=([e])=>e===-1;function x(e,t){te(e[0],e[2],{last_login:String(t.last_activity),virtual_level:t.vl})}function ue(e,t){let r=e.find(n(ce,t));r&&x(t,r)}function ge(e,t){t&&t.s&&b(t.r)&&t.r.length>0&&x(e,t.r[0])}function ye(e,t){t.s&&x(e,{last_activity:a-t.r.last_activity,vl:t.r.virtual_level})}function he(e,t){let r=s(t.r.ranks,"id").flatMap(de);e[1].forEach(n(ue,r))}function ve(e,t){t.s&&he(e,t)}function Pe(e){return u(e[0]).then(n(ve,e))}function we(e){return e[1]!==L()?p(e[1]).then(n(ge,e)):h().then(n(ye,e))}function xe(){let e=v(),t=e.filter(pe).map(Pe);e.find(ne)&&(t=t.concat(e.find(ne)[1].map(we))),J(t,ie)}function T(e){C("toprated","FindOnlinePlayers"),oe(e.target),re(),xe()}function Te(){let e=S("td",i)[0];e.children[0].className="fshTopListWrap";let t=k({id:"fshFindOnlinePlayers",className:"custombutton tip-static",type:"button",value:"Find Online Players",dataset:{tipped:"Fetch the online status of the top 250 players (warning ... takes a few seconds)."}});R(e,t),D(t,T)}var _e=[()=>q(),()=>i,()=>i.children[0],()=>i.children[0].rows,()=>i.children[0].rows.length>2,()=>l(i.children[0].rows[1]).startsWith("Last Updated")];function Ae(){return _e.every(X)}function Ee(){Ae()&&Te()}export{Ee as default};
//# sourceMappingURL=toprated-U5R7GMBW.js.map
