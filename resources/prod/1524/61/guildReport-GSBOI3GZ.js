import{a as A,c as He}from"./chunk-PVBQGKID.js";import{a as ke}from"./chunk-SIACBDOC.js";import"./chunk-XOGSK3OE.js";import"./chunk-EGLCTWEW.js";import{a as c}from"./chunk-COAHGTUX.js";import{a as Re}from"./chunk-HVBMBJMO.js";import{a as xe}from"./chunk-KMGCVVVJ.js";import{a as Ie}from"./chunk-2MYPQ2SB.js";import"./chunk-ZCEF5B3Y.js";import"./chunk-NFBG6L7S.js";import{a as Ee}from"./chunk-FZCGBHKX.js";import"./chunk-GMVDZD73.js";import"./chunk-KGMXRJUH.js";import"./chunk-BICVC6E6.js";import{a as Me}from"./chunk-ONHZNTGL.js";import"./chunk-42EQIIQ3.js";import{a as ge}from"./chunk-TBU6D42U.js";import{a as ve}from"./chunk-E7VQ3WT4.js";import{a as te}from"./chunk-VJHWWYD6.js";import{a as x}from"./chunk-M6IOPEYN.js";import"./chunk-SUV35JJV.js";import"./chunk-F5WXPBTY.js";import"./chunk-DTPR5VRM.js";import{a as he}from"./chunk-G5SHUQL4.js";import{a as ce}from"./chunk-EBWHAZNZ.js";import{a as ae}from"./chunk-PE3M43MS.js";import"./chunk-UHRCPRA2.js";import{a as f}from"./chunk-PPAXQEYD.js";import"./chunk-H6ROHLJQ.js";import{a as s}from"./chunk-K32J6RS5.js";import"./chunk-N53U3X6N.js";import{a as O}from"./chunk-DJH7MW43.js";import"./chunk-633OWGHO.js";import"./chunk-W42R6TEG.js";import"./chunk-W5RHDDBD.js";import{a as se}from"./chunk-O7GK7I6I.js";import{a as m}from"./chunk-4JAOIN2Q.js";import{a as le}from"./chunk-NRF5E4NM.js";import{a as i}from"./chunk-EERRLM6T.js";import{a as L}from"./chunk-UIE5COX5.js";import{a as ue}from"./chunk-K5RWRCBP.js";import"./chunk-YW32WFOO.js";import"./chunk-67T22IOS.js";import{b as de}from"./chunk-4K5TAJW5.js";import{a as ie}from"./chunk-L5PNSKDT.js";import{a as ne}from"./chunk-YIRNRVOQ.js";import{a as me}from"./chunk-SVOLGRZA.js";import{a as p}from"./chunk-AMLNDKL6.js";import"./chunk-VSJWDJAE.js";import"./chunk-N35L4X3I.js";import{a as k}from"./chunk-NMZMDT4C.js";import"./chunk-M74LU33Y.js";import{a as ye}from"./chunk-BYVXHJ5E.js";import"./chunk-P32LYIQC.js";import{a as oe}from"./chunk-3A25HTZJ.js";import"./chunk-TJ6L7XVK.js";import"./chunk-W5YL3QSG.js";import"./chunk-QICZDMHT.js";import"./chunk-LGGDA375.js";import"./chunk-YLV5UIKA.js";import{a as re}from"./chunk-SRR4B7GE.js";import"./chunk-RZ3TV2NA.js";import"./chunk-Y4CNOL4E.js";import"./chunk-QCFSLNAO.js";import{a as fe}from"./chunk-CDBYAPQM.js";import"./chunk-ISMAARKL.js";import{a as N}from"./chunk-MXS7SZ5M.js";import{a as be}from"./chunk-7JARIBP6.js";import"./chunk-V75REFMA.js";import{b as g}from"./chunk-ZTLAKSAF.js";import{a}from"./chunk-BRIPXERW.js";import"./chunk-A5UFVDS4.js";import{a as l}from"./chunk-W4SU7VMV.js";import{a as ee}from"./chunk-LWP4UM2N.js";import"./chunk-TBHB36S6.js";import{a as h}from"./chunk-L35RWJ6D.js";import{a as n}from"./chunk-3XARJZUK.js";import{a as pe,b as u}from"./chunk-CR4XFS65.js";import"./chunk-C4AGMBCS.js";import"./chunk-B5WSSBSP.js";import"./chunk-MWD4X6Z5.js";import"./chunk-RC6Y3VA2.js";import"./chunk-ILE2VADS.js";import{a as H}from"./chunk-DOJ57NAO.js";import"./chunk-KZTI7NFS.js";import"./chunk-L2KXS2FW.js";import{a as y}from"./chunk-GWVOQB64.js";import"./chunk-A2JPUMZD.js";import{b as X,h as Z,x as j}from"./chunk-I67LU25W.js";import{a as R}from"./chunk-PH4INCXG.js";var Ge=`<span class="guildReportSpinner" style="background-image: url('${X}ui/misc/spinner.gif');"></span>`;function qe(e){a('<span class="fastWorn">You successfully recalled the item</span>',e)}function we(e){a('<span class="fastWorn">Worn</span>',e)}function We(e){window.openQuickMsgDialog(e.getAttribute("target_player"))}function Te(e){return e.match(Z)[1]}function Ue(e,t,o){o.r!==1&&(e==="recall"?qe(t):we(t))}function Ce(e,t,o,r){He(A(t),Te(t),o,r).then(n(Ue,r,e))}function Se(e,t,o){Ce(e,t,o,"recall")}function Ke(e,t){s("GuildReport","Fast BP"),Se(e,t,0)}function _e(e,t){s("GuildReport","Fast GS"),Se(e,t,1)}function Qe(e,t){s("GuildReport","Fast Wear"),Number(Te(t))===he()?Ee(A(t)).then(n(we,e)):Ce(e,t,0,"wear")}var Je=[["fast-bp",Ke],["fast-gs",_e],["fast-wear",Qe]];function Ve(e){let t=e.parentNode.parentNode;if(!t)return;let{href:o}=t.children[0];!o||(Je.find(n(ae,e))[1](t,o),a(Ge,t))}var Ye=[["sendLink",Ve],["a-reply",We]];function $(){H(oe("table",g)[1],ce(Ye))}var Le='<span class="sendLink fast-bp">Fast BP</span> | ',w='<span class="sendLink fast-gs">Fast GS</span>',Ne=' | <span class="sendLink fast-wear">Fast Wear</span>',B,D,P,F,G;function ze(){return B||(B=new RegExp("<b>|Bottle|Brew|Draft|Elixir|Potion|Jagua Egg|Gut Rot Head Splitter|Serum")),B}function Xe(){return P||(P=m({innerHTML:Le+w})),P.cloneNode(!0)}function Ze(){return F||(F=m({innerHTML:Le+w+Ne})),F.cloneNode(!0)}function je(){return D||(D=m({innerHTML:w})),D.cloneNode(!0)}function Oe(){return G||(G=m({innerHTML:w+Ne})),G.cloneNode(!0)}var et=[[!0,!0,Ze],[!0,!1,Oe],[!1,!0,Xe],[!1,!1,je]];function tt(e,t,o){return o[0]===e&&o[1]===t}function q(e){let t=!ze().test(e.previousElementSibling.innerHTML),o=e.children.length===2;return et.find(n(tt,t,o))[2]()}function ot(e,t,o){return t[o]=e[o],t}function E(e){return l(e).sort(be).reduce(n(ot,e),{})}var W;function rt(e,t,o,r){return e.myMap[r]!=="Ignore"&&(o[e.myMap[r]]?o[e.myMap[r]]+=t[r]:o[e.myMap[r]]=t[r]),o}function nt(e){let t=Math.max(Math.min(e,100),0),o,r,I=0;return t<50?(o=255,r=Math.round(5.1*t)):(r=255,o=Math.round(510-5.1*t)),`#${`000000${(o*65536+r*256+I).toString(16)}`.slice(-6)}`}function it(e,t,o,r){return`${o}<tr><td>${r}</td><td style="background-color: ${nt((t[r]-e.minpoint)/(e.maxpoint-e.minpoint)*100)};">${t[r].toString()}</td></tr>`}function d(e,t){s("potReport","drawInventory");let o=E(l(t).reduce(n(rt,e,t),{}));a(`<table><tbody>${l(o).reduce(n(it,e,o),"")}</tbody></table>`,W)}function Ae(e,t,o){W=m({id:"inventory"}),e.pottab1?d(e,t):x(o.parentNode.children[0],"change",n(d,e,t)),i(o,W)}function U(e){return le("option",e)}var M,v;function $e(){let e=ke();return e.insertCell(-1),e.insertCell(-1),e}function K(e){let t=U();return t.value=e,t.text=e,t}function mt(e,t){i(e,K(t[0]))}function at(){return Ie({style:{width:"130px"}})}function ct(){if(!v){v=$e();let e=at();v.cells[1].dataset.tooltip='Set to "Ignore" to exclude from report',i(v.cells[1],e)}return v.cloneNode(!0)}function lt(e,t){let o=ct();se(t[0],o.cells[0]);let r=o.cells[1].children[0];i(r,K(t[1])),[r.name,r.value]=t,i(e.tBodies[0],o)}function Be(e,t,o){let r=Me({id:t,type:"button",value:o});i(e.cells[1],r)}function st(e){let t=$e();Be(t,"fshIgnoreAll","Ignore All"),O(t.cells[1],"&nbsp;"),Be(t,"fshReset","Reset"),i(e.tBodies[0],t)}function ft(e,t){if(t.target.tagName==="SELECT"){let o=t.target,{value:r}=o;a("",o),i(o,K("Ignore")),h(e).forEach(n(mt,o)),o.value=r}}function T(e){s("potReport","drawMapping");let t=ge({innerHTML:"<tbody></tbody>"});M.replaceChild(t,M.children[0]),y(M,"mousedown",n(ft,e.myMap)),f(3,c,[[5,3,h(e.myMap),0,n(lt,t),n(st,t)]])}function De(e,t){M=m({id:"mapping",innerHTML:"<p></p>"}),e.pottab2?T(e):x(t.parentNode.children[2],"change",n(T,e)),i(t,M)}var b="fsh_potMap",pt={pottab1:!1,pottab2:!1,pottab3:!1,myMap:{},minpoint:12,maxpoint:20};function ut(e,t){e.myMap[t]||(e.myMap[t]=t)}function dt(e,t){return ve(h(e).map(([o,r])=>[o,r,t[o]]).filter(([,o,r])=>o!=="Ignore"||r).map(([o,r])=>[o,r]))}function bt(e,t){return l(t).forEach(n(ut,e)),E(dt(e.myMap,t))}function yt(e){return m({id:"potReport",innerHTML:`<input id="pottab1" type="checkbox"${k(e.pottab1)}><label for="pottab1">Composed Potion Inventory</label><input id="pottab2" type="checkbox"${k(e.pottab2)}><label for="pottab2">Mapping</label><input id="pottab3" type="checkbox"${k(e.pottab3)}><label for="pottab3">Thresholds</label>`})}function gt(e,t){let o=m({id:"thresholds",innerHTML:`Min:<input id="minpoint" type="number" value="${e.minpoint}" min="0" max="999">Max:<input id="maxpoint" type="number" value="${e.maxpoint}" min="0" max="999">`});i(t,o)}function ht(e,t,o){o.target.tagName==="SELECT"&&(e.myMap[o.target.name]=o.target.value,u(b,e),d(e,t))}function Et(e,t,o){return e?t[o]="Ignore":t[o]=o,t}function Mt(e,t,o){e.myMap=l(t).reduce(n(Et,o),{})}function Pe(e,t,o){Mt(e,t,o),u(b,e),T(e),d(e,t)}function vt(e){return/^pottab\d$/.test(e.id)}function It(e,t){let o=t.id;e[o]=t.checked,u(b,e)}function Rt(e,t){return[[L("fshIgnoreAll"),n(Pe,e,t,!0)],[L("fshReset"),n(Pe,e,t,null)],[vt,n(It,e)]]}function xt(e,t,o){let r=o.target.id,I=xe(o.target.value,0,999);I&&(e[r]=I,u(b,e),d(e,t))}function Ht(e,t,o){y(o,"change",n(ht,e,t)),H(o,ue(Rt(e,t))),y(o,"input",n(xt,e,t))}function kt(e,t){let o=g.lastElementChild.insertRow(2).insertCell(-1);return Ht(e,t,o),o}function wt(e,t){let o=yt(e),r=m({id:"panels"});i(o,r),Ae(e,t,r),De(e,r),gt(e,r),i(kt(e,t),o)}function Tt(e,t){let o=N({},pt);N(o,ee(t,{})),o.myMap=bt(o,e),u(b,o),wt(o,e)}function _(e){!g||pe(b).then(n(Tt,e))}var Q,J,C;function Ct(e,t){let o=J[t];i(o,e)}function St(e){if(e.endsWith(" (Potion)")){let t=e.slice(0,-9);C[t]=(C[t]||0)+1}}function Lt(e){Q.push(q(e)),St(e.previousElementSibling.innerHTML)}function Nt(){c([5,3,Q,0,Ct,n(_,C)])}function V(){J=p("#pCC table table tr:not(.fshHide) td:nth-of-type(3n)"),C={},Q=[],c([5,3,J,0,Lt,Nt])}function At(e){return`${de({last_login:R.membrList[e].last_login})}<a href="${j}${R.membrList[e].id}">${e}</a> [ <span class="a-reply fshLink" target_player=${e}>m</span> ]`}function $t(e){let t=re(e);R.membrList[t]&&a(At(t),e)}function Y(){let e=p('#pCC table table tr:not(.fshHide) td[bgcolor="#DAA534"][colspan="2"] b');c([5,3,e,0,$t])}var S,Fe;function Bt(e){e.children[0].hasAttribute("bgcolor")&&(Fe=ne(S,e.children[0].children[0])),Fe||(e.className="fshHide")}function z(){if(S=te("user"),!S||!me('#pCC table table td[bgcolor="#DAA534"] b').some(ie(S)))return;let o=p("#pCC table table tr");c([5,2,o,0,Bt])}async function Dt(){await Re(!1),f(3,Y)}function Pt(){fe()||!ye()||(Dt(),f(2,z),f(3,V),$())}export{Pt as default};
//# sourceMappingURL=guildReport-GSBOI3GZ.js.map
