import{a as ne,b as ie}from"./chunk-4HT3AD3X.js";import{a as re}from"./chunk-MR4JXMO6.js";import"./chunk-ACEZZUU2.js";import{a as Kt,b as ee}from"./chunk-5ETY7BQX.js";import{a as me}from"./chunk-LAVLGHZD.js";import{a as B}from"./chunk-S25ADXRU.js";import{a as Zt}from"./chunk-RIODCMIA.js";import{a as oe}from"./chunk-UXRAOPJQ.js";import{a as te}from"./chunk-COAHGTUX.js";import{a as Yt}from"./chunk-NDOSPWAY.js";import{a as Wt}from"./chunk-TQMWKADP.js";import"./chunk-DFDY7R4S.js";import{a as Ot,b as Q,c as Qt,d as _,e as _t,f as zt,g as Jt}from"./chunk-K4HKOEPB.js";import{a as Vt}from"./chunk-KXK5PPXV.js";import{a as jt}from"./chunk-US6XGAYN.js";import"./chunk-H27FGTJ7.js";import{a as X}from"./chunk-BICVC6E6.js";import{a as F}from"./chunk-ONHZNTGL.js";import{a as Gt}from"./chunk-TBU6D42U.js";import{a as Ut}from"./chunk-OCGB7BD5.js";import{a as Ft}from"./chunk-QZPX5STO.js";import"./chunk-QR6TWWSY.js";import{a as O}from"./chunk-2W33ZJXK.js";import{a as Xt}from"./chunk-525RTZTH.js";import"./chunk-RQF33MH3.js";import{a as qt}from"./chunk-RRDFH4PK.js";import{a as gt}from"./chunk-U7SLV2SQ.js";import{a as vt}from"./chunk-VJHWWYD6.js";import{a as q}from"./chunk-M6IOPEYN.js";import{a as i}from"./chunk-PPAXQEYD.js";import{a as L}from"./chunk-K32J6RS5.js";import"./chunk-N53U3X6N.js";import{a}from"./chunk-DJH7MW43.js";import"./chunk-W5RHDDBD.js";import{a as m}from"./chunk-4JAOIN2Q.js";import{a as Ct}from"./chunk-NRF5E4NM.js";import{a as r}from"./chunk-EERRLM6T.js";import"./chunk-YW32WFOO.js";import{a as Tt}from"./chunk-OCTQIOIH.js";import{a as At}from"./chunk-4K5TAJW5.js";import{f as M}from"./chunk-TKSMPJMZ.js";import{a as Ht}from"./chunk-EFF7KNX2.js";import{a as p}from"./chunk-AMBECJSA.js";import{a as D}from"./chunk-L5PNSKDT.js";import"./chunk-YIRNRVOQ.js";import{a as I}from"./chunk-SVOLGRZA.js";import{a as St}from"./chunk-AMLNDKL6.js";import"./chunk-VSJWDJAE.js";import{a as Et}from"./chunk-N35L4X3I.js";import"./chunk-NMZMDT4C.js";import{a as Pt,b as Mt,c as Rt,d as $t}from"./chunk-PD5PUUZS.js";import"./chunk-M74LU33Y.js";import"./chunk-PV6TS7PA.js";import"./chunk-I4XIXMAY.js";import{a as It}from"./chunk-BYVXHJ5E.js";import"./chunk-5SB6JHBH.js";import{a as k}from"./chunk-P32LYIQC.js";import{a as y}from"./chunk-3A25HTZJ.js";import{a as wt}from"./chunk-TJ6L7XVK.js";import{a as Nt}from"./chunk-W5YL3QSG.js";import"./chunk-QICZDMHT.js";import"./chunk-LGGDA375.js";import"./chunk-YLV5UIKA.js";import"./chunk-SRR4B7GE.js";import"./chunk-RZ3TV2NA.js";import{a as P}from"./chunk-GN5NA7YF.js";import"./chunk-Y4CNOL4E.js";import"./chunk-QCFSLNAO.js";import{a as Lt}from"./chunk-CDBYAPQM.js";import{a as R}from"./chunk-UHCYU2AF.js";import"./chunk-ISMAARKL.js";import{a as Dt}from"./chunk-7JARIBP6.js";import"./chunk-V75REFMA.js";import{b as s}from"./chunk-ZTLAKSAF.js";import{a as f}from"./chunk-BRIPXERW.js";import"./chunk-A5UFVDS4.js";import{a as U}from"./chunk-W4SU7VMV.js";import"./chunk-LWP4UM2N.js";import"./chunk-TBHB36S6.js";import"./chunk-L35RWJ6D.js";import{a as l}from"./chunk-3XARJZUK.js";import{a as Bt,b as xt}from"./chunk-CR4XFS65.js";import"./chunk-C4AGMBCS.js";import"./chunk-B5WSSBSP.js";import"./chunk-MWD4X6Z5.js";import"./chunk-RC6Y3VA2.js";import"./chunk-ILE2VADS.js";import{a as T}from"./chunk-DOJ57NAO.js";import{b as c}from"./chunk-KZTI7NFS.js";import{a as kt}from"./chunk-L2KXS2FW.js";import{a as u}from"./chunk-GWVOQB64.js";import"./chunk-VMJOI624.js";import"./chunk-A2JPUMZD.js";import{F as H,J as bt,Ma as yt,g as A,sa as C,ua as b,x as ht}from"./chunk-I67LU25W.js";import{a as S}from"./chunk-PH4INCXG.js";var ce=0,ae=1;function xe(t,e){let o=A.exec(e.dataset.tipped);return At({min:o[3],hour:o[2],day:o[1]})<44640&&(t[ce]+=1,t[ae]+=Number(/Stamina:<\/td><td>(\d+)/.exec(e.dataset.tipped)[1])),t}function we(t){return t.reduce(xe,[0,0])}function z(){let t=k("b",s).find(D("Members"));if(t){let e=Kt(),o=we(e);t.classList.add("tip-static"),Yt(`Active: ${o[ce]}/${e.length}<br>Stamina: ${R(o[ae])}`,t)}}function se(t,e){let o,n=t.replace(/,/g,"").match(e);return n?o=parseInt(n[1],10):o=0,o}function Ne(t,e){let o="";return t>e&&(o="+"),o+R(t-e)}function Ae(t){let e=t.dataset.tipped,o=se(e,/XP Lock: <b>(\d*)/),n=se(e,/XP: <b>(\d*)/);a(t.parentNode.nextElementSibling,` (<b>${Ne(n,o)}</b>)`)}function J(){let t=p('#pCC a[data-tipped^="<b>Guild XP</b>"]');t&&Ae(t)}function W(){let t=k(b,s).slice(-2,-1)[0].rows[0].cells[0],e=m({id:"profile-bio",innerHTML:t.innerHTML});f("",t),r(t,e),oe()}var Y,Z;function He(t){return Y&&t>=Pt()&&t<=Mt()}function De(t){return Z&&t>=Rt()&&t<=$t()}var Ie=t=>[t,A.exec(t.dataset.tipped)[1]],Pe=([,t])=>t<7,Me=([t])=>[t,Number(/VL:.+?(\d+)/.exec(t.dataset.tipped)[1])],Re=([t,e])=>[t.parentNode.parentNode.rowIndex,He(e),De(e)];function $e(){return I('#pCC a[data-tipped*="<td>VL:</td>"]').map(Ie).filter(Pe).map(Me).map(Re)}function Ge(){return Number(vt("guild_id"))!==It()&&(Y||Z)}var le=t=>t.map(([e])=>`.fshHighlight tr:nth-child(${e+1})`).join(",");function Ve(t){if(t.length){let e=`${le(t)} {background-color: #4671C8;}`;r(document.body,B(e))}}function je(t){if(t.length){let e=`${le(t)} {background-color: #FF9900;}`;r(document.body,B(e))}}function qe(t,e){if(t.length+e.length){let o=y(b,s);o[o.length-1].classList.add("fshHighlight")}}function Ue(){let t=$e(),e=t.filter(([,n])=>n),o=t.filter(([,n,E])=>!n&&E);Ve(e),je(o),qe(e,o)}function Xe(){Ge()&&Ue()}function K(){Y=c("highlightPlayersNearMyLvl"),Z=c("highlightGvGPlayersNearMyLvl"),Xe(),c("enableHistoryCompressor")&&W()}function Fe(t){a(t.parentNode,' <span class="smallLink">[b]</span>')}function Oe(t){t.target.className==="smallLink"&&Ft(Ut(t.target.previousElementSibling.href))}function tt(){let t=St(`#pCC a[href^="${ht}"]`);te([5,3,t,0,Fe]),T(s,Oe)}function $(t){return Nt({cmd:"guild",subcmd:"conflicts",page:t})}function fe(t,e){f(e,t.insertCell(-1))}function pe(t,e,o){let n=t.insertRow(t.rows.length-2);fe(n,e),fe(n,o)}function Qe(t){pe(t,`<a href="${H}conflicts">Active Conflicts</a>`,"Score")}function _e(t,e){pe(t,e.cells[0].innerHTML,`<b>${e.cells[6].innerHTML}</b>`)}function ze(t,e,o){e===1&&Qe(o),Wt(t.rows,7,0).forEach(l(_e,o))}function Je(t,e,o){let n=p("#pCC > table > tbody > tr > td > table",t);n&&n.rows.length>3&&ze(n,e,o)}function We(t){return Number(t.parentNode.innerHTML.match(/of&nbsp;(\d*)/)[1])}function Ye(t,e,o){$(t+1).then(l(e,o))}function ue(t,e){let o=wt(e),n=p('#pCC input[name="page"]',o);if(!n)return;let E=Number(n.value),Be=We(n);Je(o,E,t.node),Be>E&&Ye(E,ue,t)}function et(t){let e=t.rows[6].cells[0].children[0];e&&$(1).then(l(ue,{node:e}))}function Ze(t){t.target.id===C&&P(C,!c(C))}function ot(){let t=p("#pCC img.guild_openGuildStore");if(!t)return;let e=t.parentNode,o=m({className:"fsh-tracker"}),n=m({innerHTML:`${M(C)}&nbsp;<label class="custombutton" for="tracker">Show</label>`});u(n,"change",Ze),r(o,t),r(o,n),Xt(e,o)}function rt(t){return Ct("th",t)}var nt,G,x,mt,V;function Ke(t,e){return`${t}<option value="${e}">${e}</option>`}function to(t){return`<select name="member"><option value="- All -" selected>- All -</option>${U(t).sort(Dt).reduce(Ke,"")}</select>`}function w(t){return kt(t)?"#DEF":t.toLocaleString()}function eo(t){return G&&G!=="- All -"&&G!==t}function oo(t,e,o){return`${e}<tr><td>${re(new Date(o[_t]*1e3))}</td><td>${t}</td><td class="fshRight">${w(o[Qt])}</td><td class="fshRight">${w(o[zt])}</td><td class="fshRight">${w(o[Q])}</td><td class="fshRight">${w(o[_])}</td><td class="fshRight">${Math.floor(o[Q]/o[_]*100)}</td><td class="fshRight">${o[Ot]}</td><td class="fshRight">${w(o[Jt])}</td></tr>`}function ro(t,e){return eo(e)?t:t+V[e].reduce(l(oo,e),"")}function no(){return U(V).reduce(ro,"")}function mo(){V&&f(no(),nt),x.classList.remove("fshSpinner")}function de(){x.classList.add("fshSpinner"),i(3,mo)}function io(t){G=t.target.value,de()}function j(t){t&&(V=t,f(to(t),mt),de())}function co(){let t=rt({textContent:"Member"});return mt=m(),r(t,mt),t}function ao(t){let e=t.createTHead().insertRow(-1);a(e,"<th>Date</th>");let o=co();r(e,o),a(e,"<th>Level</th><th>VL</th><th>Stam</th><th>Max<br>Stam</th><th>Stam<br>%</th><th>Last<br>Activity<br>(Days)</th><th>GXP</th>")}function so(t){nt=Vt(),r(t,nt)}function ge(){let t=Gt({id:"tg"});return ao(t),so(t),u(t,"change",io),x=m({className:"tgCont fshSpinner64"}),r(x,t),x}var d,he,be,g;function lo(t){d.value=t,g.classList.remove("fshSpinner")}function ye(t){t&&(g.classList.add("fshSpinner"),i(4,lo,[t]))}function fo(){d.value='{"lastUpdate": 0, "members": {}}'}function po(t){X("Update successful"),j(t.members)}function uo(){let t=Tt(d.value);xt("fsh_guildActivity",t).then(l(po,t)).catch(X)}function ke(t,e){let o=Zt({className:"custombutton",textContent:t});return T(o,e),o}function go(){d=me(),d.setAttribute("autocapitalize","off"),d.setAttribute("autocomplete","off"),d.setAttribute("autocorrect","off"),d.setAttribute("spellcheck","false")}function Te(){return g=m({id:"io",className:"fshSpinner64"}),go(),he=ke("Save",uo),be=ke("Reset",fo),r(g,d),r(g,ne()),r(g,he),r(g,be),g}var it,h,N,ct;function ve(){return!h.checked}function ho(){return h.checked}function bo(){h.checked=!1}function yo(t){ho()&&t.code==="Escape"&&bo()}function ko(t){ve()&&(t.style.transform=null)}function To(){return jt({className:"fshMove ui-tabs-nav ui-widget-header ui-corner-all ui-helper-reset ui-helper-clearfix",innerHTML:'<li class="ui-state-default ui-corner-top"><label class="fsh-tab-label" for="acttab1">Guild Activity Tracker</label></li><li class="ui-state-default ui-corner-top"><label class="fsh-tab-label" for="acttab2">Import/Export</label></li><label for="tracker" class="fsh-dialog-close ui-dialog-titlebar-close">&times;</label>'})}function vo(){L("guildTracker","updateRawData"),it&&ye(it)}function Eo(){let t=m({className:"fsh-dialog-popup ui-dialog ui-tabs ui-widget ui-widget-content ui-corner-all",innerHTML:'<input id="acttab1" class="fsh-tab-open" name="acttabs" checked type="radio">'});return ct=F({className:"fsh-tab-open",id:"acttab2",name:"acttabs",type:"radio"}),q(ct,"change",vo),r(t,ct),t}function So(){let t=Eo(),e=To();return r(t,e),gt(e,t),t}function Co(){let t=m({className:"fsh-dialog-content"});return r(t,ge()),r(t,Te()),t}function Lo(){let t=So(),e=Co();r(t,e),u(h,"change",l(ko,t)),r(N,t)}function Bo(){a(N,'<div class="fsh-dialog-overlay"><label class="fsh-dialog-cancel" for="tracker"></label></div>')}function xo(t){t&&(it=JSON.stringify(t),j(t.members))}function wo(){L("guildTracker","openDialog"),Bt("fsh_guildActivity").then(xo),S.dialogIsClosed=ve,Bo(),Lo()}function No(){h=F({id:"tracker",className:"fsh-dialog-open",type:"checkbox"}),q(h,"change",wo),N=m({className:"fsh-dialog"}),r(N,h),u(document.body,"keydown",yo),r(document.body,N)}function at(){ot(),No()}var st="enableStamBars",v,lt;function Ao(t){let e=t.dataset.tipped.match(/Stamina:<\/td><td>(\d{1,12}) \/ (\d{1,12})<\/td>/);return Math.min(Math.round(Number(e[1])/Number(e[2])*100),100)}function Ho(t){let e=Ao(t);return`.fshProgressBar tr:nth-child(${t.parentNode.parentNode.rowIndex+1}) {background-image: linear-gradient(to right, rgba(255, 153, 0, 0.5) ${e}%, transparent ${e+1}%)}`}function Do(){let t=y(b,s),e=t[t.length-1];e.classList.add("fshProgressBar");let n=I(yt,e).map(Ho).join(`
`);lt=r(document.body,B(n)).sheet}function Ee(){lt?lt.disabled=!v:Do()}function Io(){v=!v,P(st,v),Ee(),L("guildManage","StamBars")}function Po(){let t=p("#pCC img.guild_openGuildStore");if(!t)return;let e=t.parentNode,o=r(e,m({className:"fshCenter",innerHTML:M(st)}));u(o,"change",Io)}function ft(){Po(),v=c(st),v&&Ee()}function Mo(t){return O({className:"fshLink",dataset:{linkto:t,tooltip:"Toggle Section"},textContent:"X"})}function Ro(t){let e=O({className:"fshNoWrap",innerHTML:"[&nbsp;"});return r(e,t),a(e,"&nbsp;]"),e}function pt(t,e,o){let n=Mo(o);r(t,Ro(n)),e.id=o,c(o)&&qt(e),T(n,ie)}function Se(t){pt(t.rows[0].cells[1].children[0],t.rows[2].cells[0].children[0],"guildLogoControl")}function Ce(t){let e=t.rows[4].cells[1].children[0];f(Et(e.innerHTML),e),pt(e,t.rows[6].cells[0].children[0],"statisticsControl")}function Le(t){pt(t.rows[15].cells[1].children[0],t.rows[17].cells[0].children[0],"guildStructureControl")}function $o(t){let e=k("b",t).filter(D("Relics"));if(e.length!==1)return;let o=e[0].parentNode.nextElementSibling.children[0];f(`[ <a href="${H}reliclist">Control</a> ]&nbsp;`,o)}function Go(t){let e=y("li",t);if(!e||!e.length)return;let o=e[e.length-1].parentNode;a(o,`<li><a href="${bt}${Ht()}" data-tooltip="Self Recall">Self Recall</a></li>`)}function Vo(){return s.lastElementChild.rows[2].cells[0].children[0]}function jo(t,e){i(3,e,[t])}function qo(t){[Se,Ce,Le,$o,Go].forEach(l(jo,t))}function Uo(t){Lt()||(c("detailedConflictInfo")&&i(3,et,[t]),i(4,at))}function ut(){if(!s)return;let t=Vo();qo(t),c("showBuffLinks")&&i(3,tt),Uo(t),ft()}function Xo(t){let e=t.nextElementSibling.nextElementSibling;e&&e.classList.add("fshBreakAll")}function dt(){let t=p('#pCC img[src*="/guilds/"][width="200"]');!t||(t.removeAttribute("style"),Xo(t))}function Fo(){i(3,ee),i(3,dt),i(3,J),i(3,z),S.subcmd==="manage"&&ut(),S.subcmd==="view"&&K()}export{Fo as default};
//# sourceMappingURL=injectGuild-YT2W764U.js.map
