import{a as wt,b as $t}from"./chunk-NZFYTF2X.js";import{a as Q}from"./chunk-SSCBWJQF.js";import{a as xt}from"./chunk-COAHGTUX.js";import{a as bt}from"./chunk-77V5XVRF.js";import{a as gt}from"./chunk-VEPZB2M4.js";import{A as N,C as d,G as dt,L as $,M as L,Q as v,R as A,S as E,T as kt,U as ht,d as ft,p as a,q as l,s as T,t as p,v as pt}from"./chunk-M73AAOSC.js";import{a as k}from"./chunk-4NGCIKP6.js";import{a as lt}from"./chunk-GMVDZD73.js";import{a as ut}from"./chunk-E7VQ3WT4.js";import{a as at}from"./chunk-SUV35JJV.js";import{a as Z}from"./chunk-PPAXQEYD.js";import{a as f}from"./chunk-K32J6RS5.js";import{a as mt}from"./chunk-633OWGHO.js";import{a as rt}from"./chunk-SVOLGRZA.js";import{a as nt}from"./chunk-VSJWDJAE.js";import{a as ot}from"./chunk-SRR4B7GE.js";import{a as B}from"./chunk-GN5NA7YF.js";import{a as it}from"./chunk-CDBYAPQM.js";import{a as D}from"./chunk-ISMAARKL.js";import{b as tt}from"./chunk-ZTLAKSAF.js";import{a as st}from"./chunk-L35RWJ6D.js";import{a as Y}from"./chunk-3XARJZUK.js";import{a as ct}from"./chunk-DOJ57NAO.js";import{b as X}from"./chunk-KZTI7NFS.js";import{a as et}from"./chunk-A2JPUMZD.js";import{X as W,c as z,p as J,t as K}from"./chunk-I67LU25W.js";import{a as w}from"./chunk-PH4INCXG.js";var Lt,_t;function _(){if(!_t){let t=w.subcmd==="dropitems"?"removeIndex[]":"storeIndex[]";Lt=document.forms[0].elements[t],_t=!0}return Lt}function y(){let t=_();return t?et(t instanceof RadioNodeList?t:[t]):[]}function I(){return y().filter(t=>!D("fshHide",k(t)))}var H;function h(){return H||(H=bt()),H}function R(t){return at({subcmd:"dodropitems",removeIndex:t})}async function U(t){let e=await $t(t),o={s:e.r===0};return o.s?o.r={items:[],deleted_items:t}:o.e={message:e.m},o}function V(t){return mt(R,U,t)}function yt(t){return k(t.target).cells[0].children[0].value}async function Bt(t){let{items:e}=await h();f("storeitems","Check All of Type"),I().filter(o=>e[o.value]&&e[o.value].item_id===e[yt(t)].item_id).forEach(o=>{o.checked=!o.disabled&&!o.checked})}function Nt(t){let e=k(t);e.cells[0].children[0].disabled=!0,rt(".actionButton",e).forEach(o=>{o.disabled=!0,o.textContent="",o.removeAttribute("data-tooltip"),o.classList.add("inProgress")}),t.blur(),t.classList.add("fshSpinner","fshSpinner12")}function Ht(t,e){t.target.classList.remove("fshSpinner","fshSpinner12"),t.target.classList.add("fshGreen"),t.target.textContent=e}async function It(t,e,o){Nt(t.target);let r=await e([yt(t)]);r&&r.s?Ht(t,o):lt(r)}var Rt=[["Check All",Bt],["Quick Send",t=>{f("storeitems","Quick Send"),It(t,wt,"Sent")}],["Quick Drop",t=>{f("storeitems","Quick Drop"),It(t,V,"Dropped")}]];function O(t){if(t.target.tagName==="A"&&["AH","UFSG"].includes(t.target.textContent)&&f("storeitems",t.target.textContent),t.target.tagName!=="BUTTON"||D("custombutton",t.target))return;let e=Rt.find(([o])=>o===ot(t.target));e&&e[1](t)}function Ut(t){let e=t[2](t[0])+"",o,r;return{c(){o=p(e),r=p(" AH and UFSG Links")},m(n,i){a(n,o,i),a(n,r,i)},p(n,i){i&1&&e!==(e=n[2](n[0])+"")&&N(o,e)},d(n){n&&l(o),n&&l(r)}}}function Vt(t){let e=t[2](t[1])+"",o,r;return{c(){o=p(e),r=p(" Quick Drop links")},m(n,i){a(n,o,i),a(n,r,i)},p(n,i){i&2&&e!==(e=n[2](n[1])+"")&&N(o,e)},d(n){n&&l(o),n&&l(r)}}}function Ot(t){let e,o,r;return e=new Q({props:{$$slots:{default:[Pt]},$$scope:{ctx:t}}}),e.$on("click",t[5]),{c(){o=T("div"),v(e.$$.fragment),d(o,"display","contents"),d(o,"--button-width","10.8em")},m(n,i){a(n,o,i),A(e,o,null),r=!0},p(n,i){let c={};i&128&&(c.$$scope={dirty:i,ctx:n}),e.$set(c)},i(n){r||($(e.$$.fragment,n),r=!0)},o(n){L(e.$$.fragment,n),r=!1},d(n){n&&l(o),E(e,n)}}}function Pt(t){let e;return{c(){e=p("Select All Guild Locked")},m(o,r){a(o,e,r)},d(o){o&&l(e)}}}function jt(t){let e,o,r,n,i,c,x,g;e=new Q({props:{$$slots:{default:[Ut]},$$scope:{ctx:t}}}),e.$on("click",t[3]),n=new Q({props:{$$slots:{default:[Vt]},$$scope:{ctx:t}}}),n.$on("click",t[4]);let u=w.subcmd2==="storeitems"&&Ot(t);return{c(){o=T("div"),v(e.$$.fragment),r=p(`\xA0
`),i=T("div"),v(n.$$.fragment),c=p(`\xA0
`),u&&u.c(),x=pt(),d(o,"display","contents"),d(o,"--button-width","11.8em"),d(i,"display","contents"),d(i,"--button-width","10.6em")},m(s,m){a(s,o,m),A(e,o,null),a(s,r,m),a(s,i,m),A(n,i,null),a(s,c,m),u&&u.m(s,m),a(s,x,m),g=!0},p(s,[m]){let M={};m&129&&(M.$$scope={dirty:m,ctx:s}),e.$set(M);let q={};m&130&&(q.$$scope={dirty:m,ctx:s}),n.$set(q),w.subcmd2==="storeitems"&&u.p(s,m)},i(s){g||($(e.$$.fragment,s),$(n.$$.fragment,s),$(u),g=!0)},o(s){L(e.$$.fragment,s),L(n.$$.fragment,s),L(u),g=!1},d(s){s&&l(o),E(e,s),s&&l(r),s&&l(i),E(n,s),s&&l(c),u&&u.d(s),s&&l(x)}}}function Ft(t,e,o){let r=dt(),n=s=>s?"Hide":"Show",{showExtraLinks:i=!1}=e,{showQuickDropLinks:c=!1}=e;function x(){f("storeitems","toggleShowExtraLinks"),o(0,i=!i),B("showExtraLinks",i),r("showExtraLinks",i)}function g(){f("storeitems","toggleShowQuickDropLinks"),o(1,c=!c),B("showQuickDropLinks",c),r("showQuickDropLinks",c)}function u(){f("storeitems","selectLocked"),r("selectLocked")}return t.$$set=s=>{"showExtraLinks"in s&&o(0,i=s.showExtraLinks),"showQuickDropLinks"in s&&o(1,c=s.showQuickDropLinks)},[i,c,n,x,g,u]}var St=class extends ht{constructor(e){super();kt(this,e,Ft,jt,ft,{showExtraLinks:0,showQuickDropLinks:1})}},Ct=St;var P;function Gt(t,e){if(e.item_id!==13699)return e.item_name;let o=t.find(r=>r.value===String(e.inv_id));return o?nt(o.parentNode.parentNode.children[2]):e.item_name}async function Mt(t){let e=await h();return!e||!e.items?{}:ut(st(e.items).map(([o,r])=>[o,{...r,item_name:Gt(t,r)}]))}async function qt(t){return P||(P=await Mt(t)),P}async function j(){let t=y();if(!t.length)return[];let e=await qt(t);return t.map(o=>[k(o).cells[2],e[o.value]]).filter(([,o])=>o)}var S=0,Dt=1,F=2,Tt=3,C=4,vt=["showExtraLinks","enableItemColoring","checkAllOfType","showQuickSendLinks","showQuickDropLinks"];function Yt(t,e){return t[e]=(t[e]||0)+1,t}function zt(t){return{...t.map(([,e])=>e.item_id).reduce(Yt,{}),13699:1}}var Jt=t=>` data-tooltip="INSTANTLY ${t} THE ITEM. NO REFUNDS OR DO-OVERS! Use at own risk."`,At=(t,e,o)=>` [<button class="fshStoreItemsButton ${t}"${e}>${o}</button>]`,Et=(t,e,o)=>At(`${t} actionButton tooltip-multiline`,Jt(e),`Quick ${o}`),Qt=(t,e,o)=>`[<a href="${t}"${e}>${o}</a>]`;function Kt(t){return t.bound?'<span class="aHSpacer"></span>':Qt(`${K}${encodeURIComponent(t.item_name)}`,"","AH")}var Wt=t=>Qt(`${W}items${J}view&item_id=${t.item_id}`,' target="_blank"',"UFSG"),Xt=(t,e,o)=>t[F]&&e[o.item_id]>1,Zt=(t,e)=>t[Tt]&&(!e.bound||e.guild_tag!==-1),te=(t,e)=>t[C]&&e.guild_tag===-1;function ee(t,e){return e[0]()?t+e[1]():t}function oe(t,e,o){return[[()=>t[S],()=>`${Kt(o)} ${Wt(o)}`],[()=>!0,()=>`&nbsp;${o.item_name}`],[()=>Xt(t,e,o),()=>At("fshBlack","","Check All")],[()=>Zt(t,o),()=>Et("fshBlue","SENDS","Send")],[()=>te(t,o),()=>Et("fshRed","DROP","Drop")]]}function ne(t,e,[o,r]){let n=o;t[Dt]&&(n.className=z[r.rarity].clas);let i=oe(t,e,r).reduce(ee,"");n.innerHTML!==i&&(n.innerHTML=i)}async function b(t){let e=await j(),o=t[F]?zt(e):[];Z(3,xt,[[5,3,e,0,Y(ne,t,o)]])}function re(t){let e=document.forms[0];return new Ct({props:{showExtraLinks:t[S],showQuickDropLinks:t[C]},target:e.parentNode.children[5].children[0]})}async function se(){let t=I();if(!t.length)return;let e=await h();!e||!e.items||t.map(o=>[o,e.items[o.value]]).filter(([,o])=>o).forEach(([o,r])=>{o.checked=!o.disabled&&r.guild_tag!==-1})}function G(t){let e=re(t);e.$on("showExtraLinks",o=>{t[S]=o.detail,b(t)}),e.$on("showQuickDropLinks",o=>{t[C]=o.detail,b(t)}),e.$on("selectLocked",()=>{se()})}async function ie(){if(it()||!_())return;let e=vt.map(o=>X(o));gt(),G(e),e.some(o=>o)&&b(e),ct(tt,O)}export{_ as a,y as b,I as c,h as d,V as e,ie as f};
//# sourceMappingURL=chunk-UR46ABHF.js.map
